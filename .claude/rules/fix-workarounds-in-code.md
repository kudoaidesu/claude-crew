# ワークアラウンドはコードで防止する

## 原則

エラーに遭遇して手動で回避したとき、**その場でコード修正できるか**を必ず判断する。

## 判断基準

1. **修正が2-3行で済む** → 即座にコードで修正する
2. **開発中に繰り返し遭遇しうる** → コードで防止する（「本番では起きない」は修正しない理由にならない）
3. **環境変数やパスなど環境依存の問題** → コード側で吸収する（spawn時のenv除去、デフォルト値設定など）

## アンチパターン

- 手動ワークアラウンドで動作確認を進め、PRサマリーに「○○で回避」と書いて終わり
- 「本番環境では発生しない」を修正しない理由にする
- ユーザーに指摘されてから直す（遅い）

## 自問チェック

ワークアラウンドを使ったら、次に進む前にこう自問する：

> 「この回避策は手動か？コードで防止できるか？修正は軽量か？」

3つともYesなら、**テスト完了を待たずにその場で修正コミットする**。